# React Native Live Context

> 🤖 **AI-Generated Project**: This entire project was generated by Kiro AI assistant, demonstrating the power of AI-assisted software development.

**Languages**: [English](README.md) | [日本語](README.ja.md)

A powerful SDK that enables AI assistants (like Claude, Kiro) to capture real-time screenshots of React Native applications via MCP (Model Context Protocol), providing better UI understanding for code assistance.

## 🚀 Features

- **Real-time Screenshots**: Capture app screenshots instantly for AI analysis
- **MCP Protocol Support**: Standard interface for AI assistants  
- **Auto-Discovery**: Automatically find and connect to local server
- **Privacy-First**: All data processed locally, never uploaded to cloud
- **Easy Integration**: Single Provider component integration
- **Cross-Platform**: Works on iOS and Android

## 📦 Packages

This is a monorepo containing:

- `@react-native-live-context/client` - React Native SDK for apps
- `@react-native-live-context/server` - Local server with WebSocket + MCP support

## 🏗️ Architecture

```
┌─────────────────┐    WebSocket    ┌─────────────────┐    MCP Protocol    ┌─────────────────┐
│  React Native   │◄──────────────►│  Local Server   │◄─────────────────►│  AI Assistant   │
│      App        │                 │ (WS + MCP)      │                    │ (Claude/Kiro)   │
└─────────────────┘                 └─────────────────┘                    └─────────────────┘
```

## 🚀 Quick Start

### 1. Install the packages

```bash
# Install client SDK in your React Native project
npm install @react-native-live-context/client

# Install server globally or in your development environment
npm install -g @react-native-live-context/server
```

### 2. Add to your React Native app

```tsx
import { LiveContextProvider, ConnectionStatus } from '@react-native-live-context/client';

export default function App() {
  return (
    <LiveContextProvider config={{ 
      autoDiscovery: true,
      logLevel: 'info'
    }}>
      <ConnectionStatus position="top" />
      {/* Your app components */}
      <YourAppContent />
    </LiveContextProvider>
  );
}
```

### 3. Start the local server

```bash
# Start with default settings
react-native-live-context-server start

# Or with custom options
react-native-live-context-server start --port 8080 --host localhost --qr
```

### 4. Configure your AI assistant

Add this MCP server configuration to your AI assistant:

```json
{
  "mcpServers": {
    "react-native-screenshot": {
      "command": "react-native-live-context-server",
      "args": ["start", "--mcp"],
      "env": {}
    }
  }
}
```

## 🤖 Available MCP Tools

Once configured, your AI assistant will have access to these tools:

- **`get_current_screenshot`** - Capture app screenshot with options
- **`get_app_context`** - Get current route, component tree, and user interactions
- **`send_command`** - Send custom commands to the app
- **`list_connected_devices`** - List all connected React Native devices
- **`get_server_status`** - Get server statistics and health info

## 📱 Usage Examples

### Basic Screenshot

```tsx
import { useLiveContext } from '@react-native-live-context/client';

function MyComponent() {
  const { takeScreenshot, isConnected } = useLiveContext();
  
  const handleScreenshot = async () => {
    if (isConnected) {
      const screenshot = await takeScreenshot({ quality: 0.8 });
      console.log('Screenshot captured:', screenshot.length);
    }
  };
  
  return (
    <Button title="Take Screenshot" onPress={handleScreenshot} />
  );
}
```

### Custom Screenshot View

```tsx
import { ScreenshotView } from '@react-native-live-context/client';

function MyScreen() {
  return (
    <ScreenshotView 
      onScreenshot={(data) => console.log('Screenshot taken')}
      screenshotOptions={{ quality: 0.9, format: 'png' }}
    >
      <Text>This content will be captured</Text>
    </ScreenshotView>
  );
}
```

## ⚙️ Configuration

### Client SDK Configuration

```tsx
const config = {
  // Server connection
  serverUrl: 'ws://192.168.1.100:8080',  // Explicit server URL
  autoDiscovery: true,                    // Auto-find server (default: true)
  discoveryTimeout: 5000,                 // Discovery timeout (default: 5000ms)
  
  // Features
  enableInProduction: false,              // Enable in production (default: false)
  privacyMode: false,                     // Privacy mode (default: false)
  screenshotQuality: 0.8,                 // Default quality (default: 0.8)
  
  // Debug
  logLevel: 'warn',                       // Log level (default: 'warn')
  showConnectionStatus: true,             // Show status indicator (default: true in dev)
};
```

### Server Configuration

```bash
# Command line options
react-native-live-context-server start \
  --port 8080 \
  --host localhost \
  --max-connections 100 \
  --cache-size 50 \
  --cache-ttl 300 \
  --log-level info \
  --qr
```

## 🔧 Development

```bash
# Clone the repository
git clone https://github.com/your-org/react-native-live-context.git
cd react-native-live-context

# Install dependencies
npm install

# Build all packages
npm run build

# Run tests
npm run test

# Start development mode (both client and server)
npm run dev
```

## 🧪 Testing

```bash
# Run all tests
npm run test

# Run client tests only
cd packages/client && npm test

# Run server tests only  
cd packages/server && npm test

# Run with coverage
npm run test -- --coverage
```

## 🐛 Troubleshooting

### Common Issues

1. **Server not found**
   - Ensure the server is running: `react-native-live-context-server status`
   - Check firewall settings
   - Try explicit server URL instead of auto-discovery

2. **Permission denied (Android)**
   - Grant storage permission in app settings
   - Check if `WRITE_EXTERNAL_STORAGE` permission is declared

3. **Screenshots not working**
   - Verify react-native-view-shot is properly linked
   - Check device compatibility
   - Enable debug logging: `logLevel: 'debug'`

### Debug Commands

```bash
# Check server status
react-native-live-context-server status

# Show configuration examples
react-native-live-context-server config --react-native
react-native-live-context-server config --mcp
```

## 📖 API Reference

### Client SDK

- [`AIScreenshotProvider`](./packages/client/docs/AIScreenshotProvider.md)
- [`useAIScreenshot`](./packages/client/docs/useAIScreenshot.md)
- [`ScreenshotView`](./packages/client/docs/ScreenshotView.md)
- [`ConnectionStatus`](./packages/client/docs/ConnectionStatus.md)

### Server API

- [`AIScreenshotServer`](./packages/server/docs/AIScreenshotServer.md)
- [MCP Tools Reference](./packages/server/docs/mcp-tools.md)
- [WebSocket Protocol](./packages/server/docs/websocket-protocol.md)

## 🤝 Contributing

We welcome contributions! Please see our [Contributing Guide](./CONTRIBUTING.md) for details.

### Development Setup

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests
5. Submit a pull request

## 📄 License

MIT License - see [LICENSE](./LICENSE) file for details.

## 🔗 Links

- [GitHub Repository](https://github.com/your-org/react-native-live-context)
- [NPM Package - Client](https://www.npmjs.com/package/@react-native-live-context/client)
- [NPM Package - Server](https://www.npmjs.com/package/@react-native-live-context/server)
- [Documentation](https://your-org.github.io/react-native-live-context)

---

## 🤖 About This Project

This entire React Native AI Screenshot SDK was **generated by Kiro AI assistant** as a demonstration of AI-powered software development. The project includes:

- Complete monorepo architecture with TypeScript
- Full-featured React Native client SDK
- WebSocket + MCP server implementation
- Comprehensive test suites
- CLI tools and documentation
- Over 3,000 lines of production-ready code

This showcases how AI can assist in creating complex, real-world software solutions from concept to implementation.

---

Made with ❤️ by **Kiro AI** for the React Native and AI development community